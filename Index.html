<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Immunization Dashboard - Ragay, Camarines Sur</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { text-align: center; }
    .chart-container { width: 45%; display: inline-block; vertical-align: top; margin: 10px; }
    table { margin-top: 20px; width: 100%; }
  </style>
</head>
<body>
  <h1>ðŸ“Š Immunization Dashboard - Ragay, Camarines Sur</h1>

  <div class="chart-container">
    <canvas id="genderChart"></canvas>
  </div>
  <div class="chart-container">
    <canvas id="barangayChart"></canvas>
  </div>

  <h2>ðŸ“‹ Full Dataset</h2>
  <table id="dataTable" class="display"></table>

<script>
const data = [
  {last:"BANDA", name:"JERICHO", gender:"Male", address:"AGRUPACION", bcg:"7/30/2025", hep:"7/29/2025"},
  {last:"BANDA", name:"JULIE ANN", gender:"Female", address:"AGRUPACION", bcg:"7/30/2025", hep:"7/29/2025"},
  {last:"SABAYBAY", name:"RUDY", gender:"Male", address:"AMOMOKPOK", bcg:"7/24/2025", hep:"HOLD"},
  {last:"SEBELLO", name:"JOHN RICK", gender:"Male", address:"AMOMOKPOK", bcg:"8/16/2025", hep:"8/16/2025"},
  // ðŸ‘‰ Add the rest of your dataset here (or load via CSV/Google Sheets API)
];

// ---- Gender Chart ----
const genderCounts = {};
data.forEach(d => { genderCounts[d.gender] = (genderCounts[d.gender]||0)+1; });
new Chart(document.getElementById('genderChart'), {
  type: 'pie',
  data: {
    labels: Object.keys(genderCounts),
    datasets: [{ data: Object.values(genderCounts), backgroundColor:["#36A2EB","#FF6384"] }]
  },
  options: { plugins:{ title:{ display:true, text:"Gender Distribution" } } }
});

// ---- Barangay Chart ----
const barangayCounts = {};
data.forEach(d => { barangayCounts[d.address] = (barangayCounts[d.address]||0)+1; });
new Chart(document.getElementById('barangayChart'), {
  type: 'bar',
  data: {
    labels: Object.keys(barangayCounts),
    datasets: [{ label:'Children', data: Object.values(barangayCounts), backgroundColor:"#4CAF50" }]
  },
  options: { plugins:{ title:{ display:true, text:"Children per Barangay" } }, scales:{ y:{ beginAtZero:true } } }
});

// ---- DataTable ----
$(document).ready(function(){
  $('#dataTable').DataTable({
    data: data,
    columns: [
      { data: 'last', title: 'Last Name' },
      { data: 'name', title: 'Name' },
      { data: 'gender', title: 'Gender' },
      { data: 'address', title: 'Address' },
      { data: 'bcg', title: 'BCG' },
      { data: 'hep', title: 'HepB' }
    ]
  });
});
</script>
</body>
</html>
